parameters:
  - name: 'type'
    type: string
  - name: 'azureSubscription'
    type: 'string'

stages:
- stage: devDeployStage
  displayName: ${{ parameters.type }}
  dependsOn: buildAppStage
  jobs:
    - job: stagingSlotJob
      displayName: 'Staging Slot'
      steps:
        - script: |
            echo 'download artifact'
          displayName: 'download artifact'
        - script: |
            echo 'webApp deploy staging'
            echo azureSubscription-${{ parameters.azureSubscription }}
          displayName: 'webApp deploy staging'
        - script: |
            echo 'smokeTest staging'
          displayName: 'smokeTest staging'
    - job: productionSlotJob
      displayName: productionSlotJob
      steps:
        - script: |
            echo 'swapSlots production'
          displayName: 'swapSlots production'
        - script: |
            echo 'smokeTest production'
          displayName: 'smokeTest production'
